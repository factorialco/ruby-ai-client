---
http_interactions:
- request:
    method: post
    uri: https://mastra.local.factorial.dev/api/agents/marvin/generate
    body:
      encoding: UTF-8
      string: '{"messages":[{"role":"user","content":"Hello!"}],"telemetry":{"recordInputs":true,"recordOutputs":true,"functionId":"mastra-text-generation","metadata":{"agent.name":"marvin","service.version":"1.0.0"},"isEnabled":true}}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
      Host:
      - mastra.local.factorial.dev
      Content-Type:
      - text/plain;charset=UTF-8
  response:
    status:
      code: 200
      message: OK
    headers:
      Access-Control-Allow-Credentials:
      - 'true'
      Access-Control-Expose-Headers:
      - Content-Length,X-Requested-With
      Content-Length:
      - '3786'
      Content-Type:
      - application/json
      Date:
      - Tue, 23 Sep 2025 14:44:27 GMT
      Vary:
      - Origin
    body:
      encoding: UTF-8
      string: '{"text":"Hello! What data or report can I help you retrieve today?","usage":{"inputTokens":39,"outputTokens":14,"totalTokens":53,"reasoningTokens":0,"cachedInputTokens":0},"steps":[{"stepType":"initial","text":"Hello!
        What data or report can I help you retrieve today?","sources":[],"files":[],"toolCalls":[],"toolResults":[],"warnings":[],"reasoningDetails":[],"providerMetadata":{"openai":{"acceptedPredictionTokens":0,"rejectedPredictionTokens":0}},"experimental_providerMetadata":{"openai":{"acceptedPredictionTokens":0,"rejectedPredictionTokens":0}},"isContinued":false,"finishReason":"stop","response":{"id":"","timestamp":"1970-01-01T00:00:00.000Z","modelId":"","headers":{"apim-request-id":"79b41fa3-5519-4b71-95d1-adbf8992ce5d","azureml-model-session":"d134-20250915181632","content-type":"text/event-stream;
        charset=utf-8","date":"Tue, 23 Sep 2025 14:44:26 GMT","strict-transport-security":"max-age=31536000;
        includeSubDomains; preload","transfer-encoding":"chunked","x-accel-buffering":"no","x-content-type-options":"nosniff","x-ms-deployment-name":"gpt-4.1","x-ms-rai-invoked":"true","x-ms-region":"Sweden
        Central","x-ratelimit-limit-requests":"100","x-ratelimit-limit-tokens":"100000","x-ratelimit-remaining-requests":"93","x-ratelimit-remaining-tokens":"95283","x-request-id":"f445d8e9-f9bb-459e-ac6b-a19524c1e110"},"messages":[{"role":"assistant","content":[{"type":"text","text":"Hello!
        What data or report can I help you retrieve today?"}]}]},"request":{"body":{"model":"gpt-4.1","temperature":0,"messages":[{"role":"system","content":"\nAlways
        and only respond with:\n\n  Hello! What data or report can I help you retrieve
        today?\n\n  and nothing else.\n"},{"role":"user","content":"Hello!"}],"stream":true,"stream_options":{"include_usage":true}}},"usage":{"inputTokens":39,"outputTokens":14,"totalTokens":53,"reasoningTokens":0,"cachedInputTokens":0},"content":[{"type":"text","text":"Hello!
        What data or report can I help you retrieve today?"}]}],"finishReason":"stop","warnings":[],"providerMetadata":{"openai":{"acceptedPredictionTokens":0,"rejectedPredictionTokens":0}},"request":{"body":{"model":"gpt-4.1","temperature":0,"messages":[{"role":"system","content":"\nAlways
        and only respond with:\n\n  Hello! What data or report can I help you retrieve
        today?\n\n  and nothing else.\n"},{"role":"user","content":"Hello!"}],"stream":true,"stream_options":{"include_usage":true}}},"reasoning":"","toolCalls":[],"toolResults":[],"sources":[],"files":[],"response":{"id":"","timestamp":"1970-01-01T00:00:00.000Z","modelId":"","headers":{"apim-request-id":"79b41fa3-5519-4b71-95d1-adbf8992ce5d","azureml-model-session":"d134-20250915181632","content-type":"text/event-stream;
        charset=utf-8","date":"Tue, 23 Sep 2025 14:44:26 GMT","strict-transport-security":"max-age=31536000;
        includeSubDomains; preload","transfer-encoding":"chunked","x-accel-buffering":"no","x-content-type-options":"nosniff","x-ms-deployment-name":"gpt-4.1","x-ms-rai-invoked":"true","x-ms-region":"Sweden
        Central","x-ratelimit-limit-requests":"100","x-ratelimit-limit-tokens":"100000","x-ratelimit-remaining-requests":"93","x-ratelimit-remaining-tokens":"95283","x-request-id":"f445d8e9-f9bb-459e-ac6b-a19524c1e110"},"messages":[{"role":"assistant","content":[{"type":"text","text":"Hello!
        What data or report can I help you retrieve today?"}]}],"uiMessages":[{"id":"d4ba1ef8-286f-4b0f-bb4b-244d36497f7f","role":"assistant","metadata":{"__originalContent":"Hello!
        What data or report can I help you retrieve today?","createdAt":"2025-09-23T14:44:27.646Z"},"parts":[{"type":"text","text":"Hello!
        What data or report can I help you retrieve today?"}]}]},"totalUsage":{"inputTokens":39,"outputTokens":14,"totalTokens":53,"reasoningTokens":0,"cachedInputTokens":0},"tripwire":false,"tripwireReason":""}'
  recorded_at: Tue, 23 Sep 2025 14:44:27 GMT
recorded_with: VCR 6.3.1
