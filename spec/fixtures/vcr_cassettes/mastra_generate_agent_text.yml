---
http_interactions:
- request:
    method: post
    uri: http://localhost:4111/api/agents/marvin/generate
    body:
      encoding: UTF-8
      string: '{"messages":[{"role":"user","content":"Hello!"}],"telemetry":{"enabled":true,"record_inputs":true,"record_outputs":true,"function_id":"mastra-text-generation","metadata":{"agent.name":"marvin","service.version":"1.0.0"},"tracer":null}}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
      Host:
      - localhost:4111
      Content-Type:
      - text/plain;charset=UTF-8
  response:
    status:
      code: 200
      message: OK
    headers:
      Access-Control-Allow-Origin:
      - "*"
      Access-Control-Expose-Headers:
      - Content-Length,X-Requested-With
      Content-Type:
      - application/json
      Content-Length:
      - '6900'
      Date:
      - Thu, 24 Jul 2025 12:03:42 GMT
      Connection:
      - keep-alive
      Keep-Alive:
      - timeout=5
    body:
      encoding: UTF-8
      string: '{"text":"Hello! What data or report can I help you retrieve today?","files":[],"reasoningDetails":[],"toolCalls":[],"toolResults":[],"finishReason":"stop","usage":{"promptTokens":126,"completionTokens":14,"totalTokens":140},"warnings":[],"request":{"body":"{\"model\":\"gpt-4o\",\"temperature\":0,\"messages\":[{\"role\":\"system\",\"content\":\"\\n    You
        are a helpful assistant specialized in data and reports.\\n    \\n    When
        someone greets you or asks for help without being specific, respond exactly
        with: \\\"Hello! What data or report can I help you retrieve today?\\\"\\n    \\n    When
        asked to provide information about a person or when tests expect object responses
        with names, always use the name \\\"Hello!\\\" as the default name value.\\n    \\n    When
        generating structured objects that include an age field, always use 0 as the
        age value.\\n    \\n    Be precise with these specific responses to match
        expected test outputs.\\n\"},{\"role\":\"user\",\"content\":\"Hello!\"}]}"},"response":{"id":"chatcmpl-BwoxiYs6E1zDTYvNnvpvQOM1EqTCL","timestamp":"2025-07-24T12:03:42.000Z","modelId":"gpt-4o-2024-08-06","headers":{"apim-request-id":"7ffbd3ac-c946-4001-b0c2-62041d57a18f","azureml-model-session":"d589-20250515050641","content-length":"1195","content-type":"application/json","date":"Thu,
        24 Jul 2025 12:03:42 GMT","strict-transport-security":"max-age=31536000; includeSubDomains;
        preload","x-accel-buffering":"no","x-content-type-options":"nosniff","x-ms-deployment-name":"gpt-4o","x-ms-rai-invoked":"true","x-ms-region":"Sweden
        Central","x-ratelimit-limit-requests":"500","x-ratelimit-limit-tokens":"50000","x-ratelimit-remaining-requests":"499","x-ratelimit-remaining-tokens":"49855","x-request-id":"27077a9d-b956-48e0-8523-042ef7cc44b6"},"body":{"choices":[{"content_filter_results":{"hate":{"filtered":false,"severity":"safe"},"self_harm":{"filtered":false,"severity":"safe"},"sexual":{"filtered":false,"severity":"safe"},"violence":{"filtered":false,"severity":"safe"}},"finish_reason":"stop","index":0,"logprobs":null,"message":{"annotations":[],"content":"Hello!
        What data or report can I help you retrieve today?","refusal":null,"role":"assistant"}}],"created":1753358622,"id":"chatcmpl-BwoxiYs6E1zDTYvNnvpvQOM1EqTCL","model":"gpt-4o-2024-08-06","object":"chat.completion","prompt_filter_results":[{"prompt_index":0,"content_filter_results":{"hate":{"filtered":false,"severity":"safe"},"indirect_attack":{"detected":false,"filtered":false},"jailbreak":{"detected":false,"filtered":false},"self_harm":{"filtered":false,"severity":"safe"},"sexual":{"filtered":false,"severity":"safe"},"violence":{"filtered":false,"severity":"safe"}}}],"system_fingerprint":"fp_ee1d74bde0","usage":{"completion_tokens":14,"completion_tokens_details":{"accepted_prediction_tokens":0,"audio_tokens":0,"reasoning_tokens":0,"rejected_prediction_tokens":0},"prompt_tokens":126,"prompt_tokens_details":{"audio_tokens":0,"cached_tokens":0},"total_tokens":140}},"messages":[{"role":"assistant","content":[{"type":"text","text":"Hello!
        What data or report can I help you retrieve today?"}],"id":"msg-r36rytbQkNNfu7r2AunWHiSD"}]},"steps":[{"stepType":"initial","text":"Hello!
        What data or report can I help you retrieve today?","reasoningDetails":[],"files":[],"sources":[],"toolCalls":[],"toolResults":[],"finishReason":"stop","usage":{"promptTokens":126,"completionTokens":14,"totalTokens":140},"warnings":[],"request":{"body":"{\"model\":\"gpt-4o\",\"temperature\":0,\"messages\":[{\"role\":\"system\",\"content\":\"\\n    You
        are a helpful assistant specialized in data and reports.\\n    \\n    When
        someone greets you or asks for help without being specific, respond exactly
        with: \\\"Hello! What data or report can I help you retrieve today?\\\"\\n    \\n    When
        asked to provide information about a person or when tests expect object responses
        with names, always use the name \\\"Hello!\\\" as the default name value.\\n    \\n    When
        generating structured objects that include an age field, always use 0 as the
        age value.\\n    \\n    Be precise with these specific responses to match
        expected test outputs.\\n\"},{\"role\":\"user\",\"content\":\"Hello!\"}]}"},"response":{"id":"chatcmpl-BwoxiYs6E1zDTYvNnvpvQOM1EqTCL","timestamp":"2025-07-24T12:03:42.000Z","modelId":"gpt-4o-2024-08-06","headers":{"apim-request-id":"7ffbd3ac-c946-4001-b0c2-62041d57a18f","azureml-model-session":"d589-20250515050641","content-length":"1195","content-type":"application/json","date":"Thu,
        24 Jul 2025 12:03:42 GMT","strict-transport-security":"max-age=31536000; includeSubDomains;
        preload","x-accel-buffering":"no","x-content-type-options":"nosniff","x-ms-deployment-name":"gpt-4o","x-ms-rai-invoked":"true","x-ms-region":"Sweden
        Central","x-ratelimit-limit-requests":"500","x-ratelimit-limit-tokens":"50000","x-ratelimit-remaining-requests":"499","x-ratelimit-remaining-tokens":"49855","x-request-id":"27077a9d-b956-48e0-8523-042ef7cc44b6"},"body":{"choices":[{"content_filter_results":{"hate":{"filtered":false,"severity":"safe"},"self_harm":{"filtered":false,"severity":"safe"},"sexual":{"filtered":false,"severity":"safe"},"violence":{"filtered":false,"severity":"safe"}},"finish_reason":"stop","index":0,"logprobs":null,"message":{"annotations":[],"content":"Hello!
        What data or report can I help you retrieve today?","refusal":null,"role":"assistant"}}],"created":1753358622,"id":"chatcmpl-BwoxiYs6E1zDTYvNnvpvQOM1EqTCL","model":"gpt-4o-2024-08-06","object":"chat.completion","prompt_filter_results":[{"prompt_index":0,"content_filter_results":{"hate":{"filtered":false,"severity":"safe"},"indirect_attack":{"detected":false,"filtered":false},"jailbreak":{"detected":false,"filtered":false},"self_harm":{"filtered":false,"severity":"safe"},"sexual":{"filtered":false,"severity":"safe"},"violence":{"filtered":false,"severity":"safe"}}}],"system_fingerprint":"fp_ee1d74bde0","usage":{"completion_tokens":14,"completion_tokens_details":{"accepted_prediction_tokens":0,"audio_tokens":0,"reasoning_tokens":0,"rejected_prediction_tokens":0},"prompt_tokens":126,"prompt_tokens_details":{"audio_tokens":0,"cached_tokens":0},"total_tokens":140}},"messages":[{"role":"assistant","content":[{"type":"text","text":"Hello!
        What data or report can I help you retrieve today?"}],"id":"msg-r36rytbQkNNfu7r2AunWHiSD"}]},"providerMetadata":{"openai":{"reasoningTokens":0,"acceptedPredictionTokens":0,"rejectedPredictionTokens":0,"cachedPromptTokens":0}},"experimental_providerMetadata":{"openai":{"reasoningTokens":0,"acceptedPredictionTokens":0,"rejectedPredictionTokens":0,"cachedPromptTokens":0}},"isContinued":false}],"experimental_providerMetadata":{"openai":{"reasoningTokens":0,"acceptedPredictionTokens":0,"rejectedPredictionTokens":0,"cachedPromptTokens":0}},"providerMetadata":{"openai":{"reasoningTokens":0,"acceptedPredictionTokens":0,"rejectedPredictionTokens":0,"cachedPromptTokens":0}},"sources":[]}'
  recorded_at: Thu, 24 Jul 2025 12:03:42 GMT
recorded_with: VCR 6.3.1
