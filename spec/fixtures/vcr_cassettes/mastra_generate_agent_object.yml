---
http_interactions:
- request:
    method: post
    uri: https://mastra.local.factorial.dev/api/agents/marvin/generate
    body:
      encoding: UTF-8
      string: '{"messages":[{"role":"user","content":"Hello!"}],"structuredOutput":{"schema":{"type":"object","properties":{"name":{"type":"string"},"age":{"type":"integer"}},"required":["name","age"],"additionalProperties":false}},"telemetry":{"recordInputs":false,"recordOutputs":true,"functionId":"mastra-object-generation","metadata":{"agent.name":"marvin","output.type":"Person"},"isEnabled":true}}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
      Host:
      - mastra.local.factorial.dev
      Content-Type:
      - text/plain;charset=UTF-8
  response:
    status:
      code: 200
      message: OK
    headers:
      Access-Control-Allow-Credentials:
      - 'true'
      Access-Control-Expose-Headers:
      - Content-Length,X-Requested-With
      Content-Length:
      - '3994'
      Content-Type:
      - application/json
      Date:
      - Tue, 23 Sep 2025 14:43:44 GMT
      Vary:
      - Origin
    body:
      encoding: UTF-8
      string: '{"text":"{\n  \"object\": {\n    \"name\": \"Hello!\",\n    \"age\":
        0\n  }\n}","usage":{"inputTokens":49,"outputTokens":24,"totalTokens":73,"reasoningTokens":0,"cachedInputTokens":0},"steps":[{"stepType":"initial","text":"{\n  \"object\":
        {\n    \"name\": \"Hello!\",\n    \"age\": 0\n  }\n}","sources":[],"files":[],"toolCalls":[],"toolResults":[],"warnings":[],"reasoningDetails":[],"providerMetadata":{"openai":{"acceptedPredictionTokens":0,"rejectedPredictionTokens":0}},"experimental_providerMetadata":{"openai":{"acceptedPredictionTokens":0,"rejectedPredictionTokens":0}},"isContinued":false,"finishReason":"stop","response":{"id":"","timestamp":"1970-01-01T00:00:00.000Z","modelId":"","headers":{"apim-request-id":"33b2d017-485c-47e6-ad08-4518dda919b2","azureml-model-session":"d134-20250915181632","content-type":"text/event-stream;
        charset=utf-8","date":"Tue, 23 Sep 2025 14:43:43 GMT","strict-transport-security":"max-age=31536000;
        includeSubDomains; preload","transfer-encoding":"chunked","x-accel-buffering":"no","x-content-type-options":"nosniff","x-ms-deployment-name":"gpt-4.1","x-ms-rai-invoked":"true","x-ms-region":"Sweden
        Central","x-ratelimit-limit-requests":"100","x-ratelimit-limit-tokens":"100000","x-ratelimit-remaining-requests":"94","x-ratelimit-remaining-tokens":"97043","x-request-id":"c338776c-7116-467a-828f-8331e8ddbdf2"},"messages":[{"role":"assistant","content":[{"type":"text","text":"{\n  \"object\":
        {\n    \"name\": \"Hello!\",\n    \"age\": 0\n  }\n}"}]}]},"request":{"body":{"model":"gpt-4.1","temperature":0,"messages":[{"role":"system","content":"\nAlways
        and only respond with the following JSON:\n\n  \"object\": {\n    \"name\":
        \"Hello!\",\n    \"age\": 0\n  },\n  and nothing else.\n"},{"role":"user","content":"Hello!"}],"stream":true,"stream_options":{"include_usage":true}}},"usage":{"inputTokens":49,"outputTokens":24,"totalTokens":73,"reasoningTokens":0,"cachedInputTokens":0},"content":[{"type":"text","text":"{\n  \"object\":
        {\n    \"name\": \"Hello!\",\n    \"age\": 0\n  }\n}"}]}],"finishReason":"stop","warnings":[],"providerMetadata":{"openai":{"acceptedPredictionTokens":0,"rejectedPredictionTokens":0}},"request":{"body":{"model":"gpt-4.1","temperature":0,"messages":[{"role":"system","content":"\nAlways
        and only respond with the following JSON:\n\n  \"object\": {\n    \"name\":
        \"Hello!\",\n    \"age\": 0\n  },\n  and nothing else.\n"},{"role":"user","content":"Hello!"}],"stream":true,"stream_options":{"include_usage":true}}},"reasoning":"","toolCalls":[],"toolResults":[],"sources":[],"files":[],"response":{"id":"","timestamp":"1970-01-01T00:00:00.000Z","modelId":"","headers":{"apim-request-id":"33b2d017-485c-47e6-ad08-4518dda919b2","azureml-model-session":"d134-20250915181632","content-type":"text/event-stream;
        charset=utf-8","date":"Tue, 23 Sep 2025 14:43:43 GMT","strict-transport-security":"max-age=31536000;
        includeSubDomains; preload","transfer-encoding":"chunked","x-accel-buffering":"no","x-content-type-options":"nosniff","x-ms-deployment-name":"gpt-4.1","x-ms-rai-invoked":"true","x-ms-region":"Sweden
        Central","x-ratelimit-limit-requests":"100","x-ratelimit-limit-tokens":"100000","x-ratelimit-remaining-requests":"94","x-ratelimit-remaining-tokens":"97043","x-request-id":"c338776c-7116-467a-828f-8331e8ddbdf2"},"messages":[{"role":"assistant","content":[{"type":"text","text":"{\n  \"object\":
        {\n    \"name\": \"Hello!\",\n    \"age\": 0\n  }\n}"}]}],"uiMessages":[{"id":"f5cbed8c-4a95-4058-913c-33df91d4a72f","role":"assistant","metadata":{"structuredOutput":{"name":"Hello!","age":0},"__originalContent":"{\n  \"object\":
        {\n    \"name\": \"Hello!\",\n    \"age\": 0\n  }\n}","createdAt":"2025-09-23T14:43:43.688Z"},"parts":[{"type":"text","text":"{\n  \"object\":
        {\n    \"name\": \"Hello!\",\n    \"age\": 0\n  }\n}"}]}]},"totalUsage":{"inputTokens":49,"outputTokens":24,"totalTokens":73,"reasoningTokens":0,"cachedInputTokens":0},"object":{"name":"Hello!","age":0},"tripwire":false,"tripwireReason":""}'
  recorded_at: Tue, 23 Sep 2025 14:43:44 GMT
recorded_with: VCR 6.3.1
