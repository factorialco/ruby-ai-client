# typed: strict

##########################################
##### THIS IS AN AUTOGENERATED FILE ######
##### DO NOT EDIT THIS FILE DIRECTLY #####
##########################################

# You can regenerate this file by running:
#
#   bin/rails generate ai:workflow --name="<%= @workflow_name %>" --force
#

module Ai
  module Workflows
    class <%= @workflow_name.classify %>
      extend T::Sig

<%= @input_struct %>

<%= @output_struct %>

      sig { params(input: Input).returns(Output) }
      def self.call(input)
        response = Ai.client.run_workflow('<%= @workflow_name %>', input:)
        TypeCoerce[Output].from(response)
      rescue TypeCoerce::CoercionError, ArgumentError => e
        raise Ai::Error, "Workflow '<%= @workflow_name %>' output could not be coerced: #{e.message}"
      end
    end
  end
end
